!function(t){t.fn.priceFormat=function(r){var n={prefix:"US$ ",suffix:"",centsSeparator:".",thousandsSeparator:",",limit:!1,centsLimit:2,clearPrefix:!1,clearSufix:!1,allowNegative:!1,insertPlusSign:!1,clearOnEmpty:!1},r=t.extend(n,r);return this.each(function(){function n(t){p.is("input")?p.val(t):p.html(t)}function i(){return m=p.is("input")?p.val():p.html()}function a(t){for(var r="",n=0;n<t.length;n++)char_=t.charAt(n),0==r.length&&0==char_&&(char_=!1),char_&&char_.match(v)&&(x?r.length<x&&(r+=char_):r+=char_);return r}function e(t){for(;t.length<S+1;)t="0"+t;return t}function c(r,n){if(!n&&(""===r||r==c("0",!0))&&w)return"";var i=e(a(r)),f="",o=0;0==S&&(g="",u="");var u=i.substr(i.length-S,S),s=i.substr(0,i.length-S);if(i=0==S?s:s+g+u,b||""!=t.trim(b)){for(var h=s.length;h>0;h--)char_=s.substr(h-1,1),o++,o%3==0&&(char_=b+char_),f=char_+f;f.substr(0,1)==b&&(f=f.substring(1,f.length)),i=0==S?f:f+g+u}return!O||0==s&&0==u||(i=r.indexOf("-")!=-1&&r.indexOf("+")<r.indexOf("-")?"-"+i:P?"+"+i:""+i),_&&(i=_+i),d&&(i+=d),i}function f(t){var r=t.keyCode?t.keyCode:t.which,i=String.fromCharCode(r),a=!1,e=m,f=c(e+i);(r>=48&&r<=57||r>=96&&r<=105)&&(a=!0),8==r&&(a=!0),9==r&&(a=!0),13==r&&(a=!0),46==r&&(a=!0),37==r&&(a=!0),39==r&&(a=!0),!O||189!=r&&109!=r&&173!=r||(a=!0),!P||187!=r&&107!=r&&61!=r||(a=!0),a||(t.preventDefault(),t.stopPropagation(),e!=f&&n(f))}function o(){var t=i(),r=c(t);t!=r&&n(r),0==parseFloat(t)&&w&&n("")}function u(){p.val(_+i())}function s(){p.val(i()+d)}function h(){if(""!=t.trim(_)&&y){var r=i().split(_);n(r[1])}}function l(){if(""!=t.trim(d)&&k){var r=i().split(d);n(r[0])}}var p=t(this),m="",v=/[0-9]/;m=p.is("input")?p.val():p.html();var _=r.prefix,d=r.suffix,g=r.centsSeparator,b=r.thousandsSeparator,x=r.limit,S=r.centsLimit,y=r.clearPrefix,k=r.clearSuffix,O=r.allowNegative,P=r.insertPlusSign,w=r.clearOnEmpty;P&&(O=!0),p.bind("keydown.price_format",f),p.bind("keyup.price_format",o),p.bind("focusout.price_format",o),y&&(p.bind("focusout.price_format",function(){h()}),p.bind("focusin.price_format",function(){u()})),k&&(p.bind("focusout.price_format",function(){l()}),p.bind("focusin.price_format",function(){s()})),i().length>0&&(o(),h(),l())})},t.fn.unpriceFormat=function(){return t(this).unbind(".price_format")},t.fn.unmask=function(){var r,n="";r=t(this).is("input")?t(this).val():t(this).html();for(var i in r)isNaN(r[i])&&"-"!=r[i]||(n+=r[i]);return n}}(jQuery);